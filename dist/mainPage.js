(()=>{chrome.runtime.onMessage.addListener(((t,n,o)=>{const i=JSON.parse(t);return"filter"===i.key&&(r(i.data),e().then(o(""))),!0})),document.addEventListener("scroll",(async()=>{try{await e()}catch(e){console.log(e)}})),document.addEventListener("DOMContentLoaded",(async()=>{try{await e()}catch(e){console.log(e)}}));const e=async()=>{const e=document.getElementById("siteTable"),r=JSON.parse(window.localStorage.getItem("subredditFilterOptions"));if(t(r,e))for(let t of e.children){let i=t.getAttribute("data-subreddit");if(o(i,r)){let o=t.getElementsByTagName("time")[0].getAttribute("datetime");n(i,o,r)&&e.removeChild(t)}}},t=(e,t)=>null!==e&&Object.keys(e).length>0&&null!==t,n=(e,t,n)=>{let o=n[e],r=o.filterCategory,i=new Date(o.filterDateTime),a=new Date(t);return"before"===r&&a<=i||"after"===r&&a>=i},o=(e,t)=>0!==e&&void 0!==t[e],r=e=>{null!==window.localStorage.getItem("subredditFilterOptions")&&window.localStorage.removeItem("subredditFilterOptions"),window.localStorage.setItem("subredditFilterOptions",JSON.stringify(e))}})();