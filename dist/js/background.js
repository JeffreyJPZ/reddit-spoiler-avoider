(()=>{chrome.runtime.onMessage.addListener(((t,s,a)=>{const r=JSON.parse(t);return"refreshFilters"!==r.key&&"requestFilters"!==r.key||e().then((()=>a(""))),!0}));const e=async()=>{const e=await chrome.storage.local.get(null),s={};for(let t in e)e[t].isActive&&(s[t]=e[t]);await t("filter",s)},t=async(e,t)=>{const[s]=await chrome.tabs.query({active:!0,currentWindow:!0});await chrome.tabs.sendMessage(s.id,JSON.stringify({key:e,data:t}))}})();