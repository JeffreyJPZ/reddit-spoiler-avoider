(()=>{chrome.runtime.onMessage.addListener(((t,s,r)=>{const a=JSON.parse(t);return"refreshFilters"!==a.key&&"requestFilters"!==a.key||e().then(r("")),!0}));const e=async()=>{chrome.storage.local.get(null,(async e=>{const s={};for(let t in e)e[t].isActive&&(s[t]=e[t]);await t("filter",s)}))},t=async(e,t)=>{const[s]=await chrome.tabs.query({active:!0,currentWindow:!0});await chrome.tabs.sendMessage(s.id,JSON.stringify({key:e,data:t}))}})();