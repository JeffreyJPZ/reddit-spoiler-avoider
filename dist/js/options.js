(()=>{"use strict";const e=e=>{chrome.storage.local.get(e,(n=>{if(e in n)console.log("Duplicate subreddit "+e+" was not added");else{t(e,null,null,null,null);const n={};n[e]={filterCategory:"before",filterDateTime:i(new Date),isActive:!1},chrome.storage.local.set(n,(()=>{}))}}))},t=(e,t,a,c,i)=>{let r=document.getElementById("subreddits").getElementsByTagName("tbody")[0].insertRow();r.setAttribute("class","subreddit"),n(r,e),l(r,t),s(r,a),o(r,c),d(r,i)},n=(e,t)=>{const n=a(e),l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("class","subreddit-name"),l.setAttribute("name",t),l.required=!0,l.value=t,n.appendChild(l)},l=(e,t)=>{const n=a(e),l=["before","after"],s=document.createElement("select");s.setAttribute("class","subreddit-filter-categories");for(let e of l){let t=document.createElement("option");t.innerHTML=e,t.value=e,s.appendChild(t)}s.value=null!==t?t:l[0],n.appendChild(s)},s=(e,t)=>{const n=a(e),l=document.createElement("input");l.setAttribute("type","datetime-local"),l.setAttribute("class","subreddit-datetime-local"),l.required=!0,l.value=null!==t?r(t):(new Date).toLocaleString("sv").slice(0,-3),n.appendChild(l)},o=(e,t)=>{const n=a(e),l=document.createElement("input");l.setAttribute("type","checkbox"),l.setAttribute("class","subreddit-activebox"),l.checked=null!==t&&t,n.appendChild(l)},d=(e,t)=>{const n=a(e),l=document.createElement("input");l.setAttribute("type","checkbox"),l.setAttribute("class","subreddit-selectedbox"),l.checked=null!==t&&t,n.appendChild(l)},a=e=>e.insertCell(),c=()=>{const e=document.getElementById("subreddits").getElementsByTagName("tbody")[0],t=[];for(let n=0;n<e.rows.length;n++){let l=e.rows[n],s=l.children[0].getElementsByTagName("input")[0].getAttribute("name"),o=l.children[0].getElementsByTagName("input")[0].value,d=l.children[1].getElementsByTagName("select")[0].value,a=l.children[2].getElementsByTagName("input")[0].value,c=l.children[3].getElementsByTagName("input")[0].checked;l.children[0].getElementsByTagName("input")[0].setAttribute("name",o),s!==o&&t.push(s);const r={};r[o]={filterCategory:d,filterDateTime:i(a),isActive:c},chrome.storage.local.set(r,(()=>{}))}chrome.storage.local.remove(t,(()=>{}))},i=e=>new Date(e).toISOString().slice(0,-8),r=e=>{const t=(new Date).getTimezoneOffset(),n=new Date(e);return n.setMinutes(n.getMinutes()-t),n.toLocaleString("sv").slice(0,-3)};(()=>{const e=document.getElementById("subreddits").getElementsByTagName("tbody")[0];let n=0;for(;n<e.rows.length;)e.deleteRow(n),n++;chrome.storage.local.get(null,(e=>{for(let n in e){let l=n,s=e[n].filterCategory,o=e[n].filterDateTime,d=e[n].isActive;t(l,s,o,d,null)}}))})(),(()=>{const t=document.getElementById("addButton"),n=document.getElementById("deleteButton"),l=document.getElementById("updateButton");document.addEventListener("DOMContentLoaded",(()=>{t.addEventListener("click",(()=>{try{(()=>{const t=document.getElementById("subredditInput").value;e(t)})()}catch(e){console.log(e)}}))})),document.addEventListener("DOMContentLoaded",(()=>{n.addEventListener("click",(()=>{try{(()=>{const e=document.getElementById("subreddits").getElementsByTagName("tbody")[0],t=[];let n=0;for(;n<e.rows.length;){let l=e.rows[n];if(l.children[4].getElementsByTagName("input")[0].checked){let s=l.children[0].getElementsByTagName("input")[0].value;t.push(s),e.deleteRow(n)}else n++}chrome.storage.local.remove(t,(()=>{}))})()}catch(e){console.log(e)}}))})),document.addEventListener("DOMContentLoaded",(()=>{l.addEventListener("click",(()=>{try{(()=>{const e=document.getElementById("subreddits").getElementsByTagName("tbody")[0],t={};let n=!0;for(let l=0;l<e.rows.length;l++){let s=e.rows[l],o=s.children[0].getElementsByTagName("input")[0].value,d=s.children[2].getElementsByTagName("input")[0].value;if(t[o]||""===o||""===d){n=!1;break}t[o]=!0}n?c():console.log("Duplicate or invalid field was inputted")})()}catch(e){console.log(e)}}))}))})()})();