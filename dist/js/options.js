(()=>{"use strict";const e=async e=>{if(e in await chrome.storage.local.get(e))console.log("Duplicate subreddit "+e+" was not added");else{const n={};n[e]={filterCategory:"before",filterDateTime:i(new Date),isActive:!1},await chrome.storage.local.set(n),t(e,null,null,null,null)}},t=(e,t,c,d,i)=>{let r=document.getElementById("subreddits").getElementsByTagName("tbody")[0].insertRow();r.setAttribute("class","subreddit"),n(r,e),l(r,t),a(r,c),s(r,d),o(r,i)},n=(e,t)=>{const n=c(e),l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("class","subreddit-name"),l.setAttribute("name",t),l.required=!0,l.value=t,n.appendChild(l)},l=(e,t)=>{const n=c(e),l=["before","after"],a=document.createElement("select");a.setAttribute("class","subreddit-filter-categories");for(let e of l){let t=document.createElement("option");t.innerHTML=e,t.value=e,a.appendChild(t)}a.value=null!==t?t:l[0],n.appendChild(a)},a=(e,t)=>{const n=c(e),l=document.createElement("input");l.setAttribute("type","datetime-local"),l.setAttribute("class","subreddit-datetime-local"),l.required=!0,l.value=null!==t?r(t):(new Date).toLocaleString("sv").slice(0,-3),n.appendChild(l)},s=(e,t)=>{const n=c(e),l=document.createElement("input");l.setAttribute("type","checkbox"),l.setAttribute("class","subreddit-activebox"),l.checked=null!==t&&t,n.appendChild(l)},o=(e,t)=>{const n=c(e),l=document.createElement("input");l.setAttribute("type","checkbox"),l.setAttribute("class","subreddit-selectedbox"),l.checked=null!==t&&t,n.appendChild(l)},c=e=>e.insertCell(),d=()=>{const e=document.getElementById("subreddits").getElementsByTagName("tbody")[0],t=[];for(let n=0;n<e.rows.length;n++){let l=e.rows[n],a=l.children[0].getElementsByTagName("input")[0].getAttribute("name"),s=l.children[0].getElementsByTagName("input")[0].value,o=l.children[1].getElementsByTagName("select")[0].value,c=l.children[2].getElementsByTagName("input")[0].value,d=l.children[3].getElementsByTagName("input")[0].checked;const r={};r[s]={filterCategory:o,filterDateTime:i(c),isActive:d},chrome.storage.local.set(r,(()=>{})),a!==s&&t.push(a),l.children[0].getElementsByTagName("input")[0].setAttribute("name",s)}chrome.storage.local.remove(t,(()=>{}))},i=e=>new Date(e).toISOString().slice(0,-8),r=e=>{const t=(new Date).getTimezoneOffset(),n=new Date(e);return n.setMinutes(n.getMinutes()-t),n.toLocaleString("sv").slice(0,-3)};(async()=>{const e=document.getElementById("subreddits").getElementsByTagName("tbody")[0];let n=0;for(;n<e.rows.length;)e.deleteRow(n),n++;const l=await chrome.storage.local.get(null);for(let e in l){let n=e,a=l[e].filterCategory,s=l[e].filterDateTime,o=l[e].isActive;t(n,a,s,o,null)}})(),(()=>{const t=document.getElementById("addButton"),n=document.getElementById("deleteButton"),l=document.getElementById("updateButton");document.addEventListener("DOMContentLoaded",(()=>{t.addEventListener("click",(async()=>{try{await(async()=>{const t=document.getElementById("subredditInput").value;await e(t)})()}catch(e){console.log(e)}}))})),document.addEventListener("DOMContentLoaded",(()=>{n.addEventListener("click",(async()=>{try{await(async()=>{const e=document.getElementById("subreddits").getElementsByTagName("tbody")[0],t=[];let n=0;for(;n<e.rows.length;){let l=e.rows[n];if(l.children[4].getElementsByTagName("input")[0].checked){let a=l.children[0].getElementsByTagName("input")[0].value;t.push(a),e.deleteRow(n)}else n++}await chrome.storage.local.remove(t)})()}catch(e){console.log(e)}}))})),document.addEventListener("DOMContentLoaded",(()=>{l.addEventListener("click",(()=>{try{(()=>{const e=document.getElementById("subreddits").getElementsByTagName("tbody")[0],t={};let n=!0;for(let l=0;l<e.rows.length;l++){let a=e.rows[l],s=a.children[0].getElementsByTagName("input")[0].value,o=a.children[2].getElementsByTagName("input")[0].value;if(t[s]||""===s||""===o){n=!1;break}t[s]=!0}n?d():console.log("Duplicate or invalid field was inputted")})()}catch(e){console.log(e)}}))}))})()})();