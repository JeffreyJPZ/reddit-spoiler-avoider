(()=>{chrome.runtime.onMessage.addListener(((t,n,i)=>{const a=JSON.parse(t);return"filter"===a.key&&(r(a.data),e().then(i(""))),!0})),document.addEventListener("scroll",(async()=>{try{await e()}catch(e){console.log(e)}})),document.addEventListener("DOMContentLoaded",(async()=>{try{await e()}catch(e){console.log(e)}}));const e=async()=>{const e=document.getElementById("siteTable"),i=JSON.parse(window.localStorage.getItem("subredditFilterOptions"));n(i,e)&&t(i,e)},t=(e,n)=>{for(let r of n.children)if("sitetable linklisting"===r.getAttribute("class"))t(e,r);else{let t=r.getAttribute("data-subreddit");if(a(t,e)){let a=r.getElementsByTagName("time")[0].getAttribute("datetime");i(t,a,e)&&n.removeChild(r)}}},n=(e,t)=>null!==e&&null!==t,i=(e,t,n)=>{let i=n[e],a=i.filterCategory,r=new Date(i.filterDateTime+"Z"),l=new Date(t);return"before"===a&&l<=r||"after"===a&&l>=r},a=(e,t)=>0!==e&&void 0!==t[e],r=e=>{window.localStorage.setItem("subredditFilterOptions",JSON.stringify(e))}})();