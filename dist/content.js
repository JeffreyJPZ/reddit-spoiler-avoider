(()=>{const e="siteTable";chrome.runtime.onMessage.addListener(((e,n,r)=>{const i=JSON.parse(e);return"filter"===i.key&&(a(i.data),t().then(r(""))),!0})),document.addEventListener("scroll",(async()=>{try{await t()}catch(e){console.log(e)}}));try{chrome.runtime.sendMessage(JSON.stringify({key:"requestFilters"})).then()}catch(e){console.log(e)}document.getElementById(e).addEventListener("DOMNodeInserted",(async n=>{if(n.target.parentNode.id===e)try{await t()}catch(e){console.log(e)}}));const t=async()=>{const t=document.getElementById(e),i=JSON.parse(window.localStorage.getItem("subredditFilterOptions"));n(t,i)&&r(t,i)},n=(e,t)=>null!==t&&null!==e,r=(e,t)=>{for(let n of e.children)"sitetable linklisting"===n.getAttribute("class")?r(n,t):i(n)&&s(n,t)&&e.removeChild(n)},i=e=>0!==e.getAttribute("data-subreddit"),s=(e,t)=>{const n=t[e.getAttribute("data-subreddit")];if(void 0===n)return!1;const r=e.getElementsByTagName("time")[0].getAttribute("datetime"),i=n.filterCategory,s=new Date(n.filterDateTime+"Z"),a=new Date(r);return"before"===i&&a<=s||"after"===i&&a>=s},a=e=>{window.localStorage.setItem("subredditFilterOptions",JSON.stringify(e))};try{t().then()}catch(e){console.log(e)}})();