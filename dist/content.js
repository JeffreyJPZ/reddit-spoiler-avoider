(()=>{chrome.runtime.onMessage.addListener(((t,n,a)=>{const i=JSON.parse(t);return"filter"===i.key&&(r(i.data),e().then(a(""))),!0})),document.addEventListener("scroll",(async()=>{try{await e()}catch(e){console.log(e)}})),document.addEventListener("DOMContentLoaded",(async()=>{try{await e()}catch(e){console.log(e)}}));const e=async()=>{const e=document.getElementById("siteTable"),r=JSON.parse(window.localStorage.getItem("subredditFilterOptions"));if(t(r,e))for(let t of e.children){let i=t.getAttribute("data-subreddit");if(a(i,r)){let a=t.getElementsByTagName("time")[0].getAttribute("datetime");n(i,a,r)&&e.removeChild(t)}}},t=(e,t)=>null!==e&&Object.keys(e).length>0&&null!==t,n=(e,t,n)=>{let a=n[e],r=a.filterCategory,i=new Date(a.filterDateTime+"Z"),o=new Date(t);return"before"===r&&o<=i||"after"===r&&o>=i},a=(e,t)=>0!==e&&void 0!==t[e],r=e=>{window.localStorage.setItem("subredditFilterOptions",JSON.stringify(e))}})();