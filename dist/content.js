(()=>{chrome.runtime.onMessage.addListener(((e,n,r)=>{const a=JSON.parse(e);return"filter"===a.key&&(i(a.data),t().then(r(""))),!0})),document.addEventListener("scroll",(async()=>{try{await t()}catch(t){console.log(t)}})),document.addEventListener("DOMContentLoaded",(async()=>{try{await t()}catch(t){console.log(t)}}));const t=async()=>{const t=document.getElementById("siteTable"),r=JSON.parse(window.localStorage.getItem("subredditFilterOptions"));e(t,r)&&n(t,r)},e=(t,e)=>null!==e&&null!==t,n=(t,e)=>{for(let i of t.children)"sitetable linklisting"===i.getAttribute("class")?n(i,e):r(i)&&a(i,e)&&t.removeChild(i)},r=t=>0!==t.getAttribute("data-subreddit"),a=(t,e)=>{const n=e[t.getAttribute("data-subreddit")];if(void 0===n)return!1;const r=t.getElementsByTagName("time")[0].getAttribute("datetime"),a=n.filterCategory,i=new Date(n.filterDateTime+"Z"),o=new Date(r);return"before"===a&&o<=i||"after"===a&&o>=i},i=t=>{window.localStorage.setItem("subredditFilterOptions",JSON.stringify(t))}})();